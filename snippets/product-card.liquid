<div class="group bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200">
  <!-- Product Image -->
  <div class="aspect-square overflow-hidden bg-gray-100 relative">
    <a href="{{ product.url }}" class="block">
      {% if product.featured_image %}
        <img 
          src="{{ product.featured_image | image_url: width: 400 }}" 
          alt="{{ product.featured_image.alt | escape }}"
          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"
          loading="lazy"
        >
      {% else %}
        <div class="w-full h-full flex items-center justify-center bg-gray-100">
          <span class="text-gray-400 text-sm">No Image</span>
        </div>
      {% endif %}
    </a>
    
    <!-- Sale Badge -->
    {% if product.compare_at_price > product.price %}
      <div class="absolute top-2 left-2 bg-red-500 text-white text-xs font-medium px-2 py-1 rounded">
        Sale
      </div>
    {% endif %}
  </div>

  <!-- Product Info -->
  <div class="p-4">
    <h3 class="text-lg font-medium text-gray-900 mb-2 line-clamp-2">
      <a href="{{ product.url }}" class="hover:text-gray-700">
        {{ product.title }}
      </a>
    </h3>
    
    <!-- Price -->
    <div class="flex items-center space-x-2 mb-3">
      <span class="text-lg font-semibold text-gray-900">
        {{ product.price | money }}
      </span>
      {% if product.compare_at_price > product.price %}
        <span class="text-sm text-gray-500 line-through">
          {{ product.compare_at_price | money }}
        </span>
      {% endif %}
    </div>

    <!-- Quick Add Button -->
    {% if product.available %}
      <form action="/cart/add" method="post" enctype="multipart/form-data" class="quick-add-form">
        <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
        <input type="hidden" name="quantity" value="1">
        <button 
          type="submit" 
          class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors font-medium text-sm quick-add-btn"
        >
          Quick Add
        </button>
      </form>
    {% else %}
      <button 
        disabled
        class="w-full bg-gray-300 text-gray-500 py-2 px-4 rounded font-medium text-sm cursor-not-allowed"
      >
        Sold Out
      </button>
    {% endif %}
  </div>
</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>